<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <script src="isvalid.js" defer></script> -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Document</title>
    <script src="/ajax-insert-update-form/update.js"></script>
    <script src="/ajax-insert-update-form/isvalid.js"></script>
    <script>
        const add = (id, size) => {
            id=document.getElementById(id)
            var parent = id.parentNode;
            if (size >= parent.children.length) {
                var row = parent.children[1].cloneNode(true);
                var p = document.createElement('p')
                p.setAttribute('onclick', 'removenode(this)')
                p.innerHTML = 'remove'
                p.setAttribute('class', 'btn btn-danger')
                row.appendChild(p);
                parent.appendChild(row)
            }
        }
        const removenode = (id) => {
            parent = id.parentNode;
            parent.remove()
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="heading">
            <h1>Job Application Form</h1>
        </div>
        <p id="print-err" style="display: block; color: white; text-align: center; width: calc(100%/1); background-color: rgb(227, 53, 53); font-weight: bold;"></p>
        <div class="header" id="header_sec">
            <div class="p-2 row">
                <div class="col-md p-3 text-light text-center bg-primary">
                    <lable>Baisic Details</lable>
                </div>
                <div class="col-md p-3  text-center">
                    <lable>Education Details</lable>
                </div>
                <div class="col-md p-3  text-center">
                    <lable>Work Expirence</lable>
                </div>
                <div class="col-md p-3  text-center">
                    <lable>Languages</lable>
                </div>
                <div class="col-md p-3  text-center">
                    <lable>Technologies</lable>
                </div>
                <div class="col-md p-3  text-center">
                    <lable>Refrences</lable>
                </div>
                <div class="col-md p-3  text-center">
                    <lable>prefrences</lable>
                </div>
            </div>
        </div>
        <form id="form-1">
            <input type="hidden" name="canid">
            <section id='form_sec'>
                <div class="baisicdetails border border-primary">
                    <div class="p-2 row">
                        <div class="col-md-6">
                            <lable class='text-primary'>First Name</label>
                                <input type="text" name="first_name" id="first_name" class="form-control"
                                    placeholder="Enter First Name" tabindex="1">
                        </div>
                        <div class="col-md-6">
                            <lable class='text-primary'>Last Name</label>
                                <input type="text" name="last_name" id="last_name" class="form-control"
                                    placeholder="Enter Last Name" tabindex="2">
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-6">
                            <lable class='text-primary'>Designation</label>
                                <input type="text" name="designation" id="designation" class="form-control"
                                    placeholder="Enter Designation" tabindex="3">
                        </div>
                        <div class="col-md-6">
                            <lable class='text-primary'>Email</label>
                                <input type="text" name="email" id="email" class="form-control"
                                    placeholder="Enter Email" tabindex="4">
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-6">
                            <lable class='text-primary'>Phone Number</label>
                                <input type="text" name="phone_no" id="phone_no" class="form-control"
                                    placeholder="Enter Phone Number" tabindex="4">
                        </div>
                        <div class="col-md">
                            <lable class='text-primary'>Gender</label><br>

                                <input type="radio" name="gender" value="male" id="male" class="form-radio" tabindex="5"><label
                                    for="male">Male</label>&emsp;

                                <input type="radio" name="gender" value="female" id="female" class="form-radio" tabindex="6"><label
                                    for="female">Female</label>
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-6">
                            <lable class='text-primary'>Relationship Status</label>
                                <select id="relationship" name="relationship" tabindex="7" class="form-control">
                                    <option value="single">single</option>
                                    <option value="married">married</option>
                                </select>
                        </div>
                        <div class="col-md-6">
                            <lable class='text-primary'>Birthdate</label>
                                <input type="text" name="birthdate" id="birthdate" placeholder="YYYY-MM-DD"
                                    class="form-control" tabindex="8">
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-6">
                            <lable class='text-primary'>State</label>
                                <select id="state" name="state" tabindex="9" class="form-control">
                                    <option value="gujrat">gujrat</option>
                                    <option value="rajasthan">rajasthan</option>
                                </select>
                        </div>
                        <div class="col-md-6">
                            <lable class='text-primary'>City</label>
                                <input type="text" name="city" id="city" class="form-control" placeholder="Enter City"
                                    tabindex="10">
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md">
                            <label class="text-primary">Address 1</label>
                            <textarea name="address" id="address1" placeholder="Adrress 1" tabindex="11"
                                class="form-control"></textarea>
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md">
                            <label class="text-primary">Address 2</label>
                            <textarea name="address" id="address2" placeholder="Adrress 1" tabindex="12"
                                class="form-control"></textarea>
                        </div>
                    </div>
                </div>
                <div class="education-details border border-primary" style="display: none;">
                    <p class="btn btn-primary" id="edu" onclick="add('edu',4)">Add Education</p>
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <label class="text-primary">Select Course</label>
                            <select id="course" name="course" class="text-primary form-control" tabindex="13">
                                <option value="ssc">Ssc</option>
                                <option value="hsc">Hsc</option>
                                <option value="ug">Under graduation</option>
                                <option value="pg">Post graduation</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <lable class="text-primary">Borad/University</lable>
                            <input type="text" id="board" name="board" placeholder="Enter Board or University"
                                class="form-control" tabindex="13">
                        </div>
                        <div class="col-md-3">
                            <lable class="text-primary">Passing Year</lable>
                            <input type="text" id="passing_year" name="passing_year" class="form-control" tabindex="13"
                                placeholder="Enter passing year">
                        </div>
                        <div class="col-md-3">
                            <lable class="text-primary">Percentage</lable>
                            <input type="text" id="percentage" name="percentage" class="form-control" tabindex="13"
                                placeholder="Enter Percentage">
                        </div>
                    </div>
                </div>
                <div class="workexp border border-primary" style="display: none;">
                    <p class="btn btn-primary" id="work" onclick="add('work',5)">Add Work Expirence</p>
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <label class="text-primary">Company Name</label>
                            <input type="text" id="company_name" name="company_name" class="form-control" tabindex="14"
                                placeholder="Enter company name">
                        </div>
                        <div class="col-md-3">
                            <label class="text-primary">Desiganation</label>
                            <input type="text" id="work_designation" name="work_designation" class="form-control"
                                tabindex="14" placeholder="Enter Desiganation">
                        </div>
                        <div class="col-md-3">
                            <label class="text-primary">From Date</label>
                            <input type="text" id="from_date" name="from_date" class="form-control" tabindex="14"
                                placeholder="Enter From Date">
                        </div>
                        <div class="col-md-3">
                            <label class="text-primary">To Date</label>
                            <input type="text" id="to_date" name="to_date" class="form-control" tabindex="14"
                                placeholder="Enter To Date">
                        </div>
                    </div>
                </div>
                <div class="language border border-primary" style="display: none;">
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="hindi" id="hindi_lan" value="hindi" class="form-check-input">
                            <label for="hindi_lan">Hindi</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="hindi" id="hindi_r" value="r" class="form-check-input">
                            <label for="hindi_r" class="text-primary">Read</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="hindi" id="hindi_w" value="w" class="form-check-input">
                            <label for="hindi_w" class="text-primary">Write</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="hindi" id="hindi_s" value="s" class="form-check-input">
                            <label for="hindi_s" class="text-primary">Speak</label>
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="english" id="english_lan" value="english"
                                class="form-check-input">
                            <label for="english_lan">english</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="english" id="english_r" value="r" class="form-check-input">
                            <label for="english_r" class="text-primary">Read</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="english" id="english_w" value="w" class="form-check-input">
                            <label for="english_w" class="text-primary">Write</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="english" id="english_s" value="s" class="form-check-input">
                            <label for="english_s" class="text-primary">Speak</label>
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="gujrati" id="gujrati_lan" value="gujrati"
                                class="form-check-input">
                            <label for="gujrati_lan">gujrati</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="gujrati" id="gujrati_r" value="r" class="form-check-input">
                            <label for="gujrati_r" class="text-primary">Read</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="gujrati" id="gujrati_w" value="w" class="form-check-input">
                            <label for="gujrati_w" class="text-primary">Write</label>
                        </div>
                        <div class="col-md-3">
                            <input type="checkbox" name="gujrati" id="gujrati_s" value="s" class="form-check-input">
                            <label for="gujrati_s" class="text-primary">Speak</label>
                        </div>
                    </div>
                </div>
                <div class="technolgy container border border-primary" style="display: none;">
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="php" id="php_lan" class="form-check-input"
                                value="php">&nbsp;<label for="php_lan" class="text-primary">php</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="php" id="php_b" class="form-check-input" value="b">&nbsp;<label
                                for="php_b" class="text-primary">Beginer</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="php" id="php_m" class="form-check-input" value="m">&nbsp;<label
                                for="php_m" class="text-primary">Miderator</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="php" id="php_e" class="form-check-input" value="e">&nbsp;<label
                                for="php_e" class="text-primary">Expert</label>
                        </div>
                    </div>

                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="mysql" id="mysql_lan" class="form-check-input"
                                value="mysql">&nbsp;<label for="mysql_lan" class="text-primary">mysql</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="mysql" id="mysql_b" class="form-check-input"
                                value="b">&nbsp;<label for="mysql_b" class="text-primary">Beginer</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="mysql" id="mysql_m" class="form-check-input"
                                value="m">&nbsp;<label for="mysql_m" class="text-primary">Miderator</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="mysql" id="mysql_e" class="form-check-input"
                                value="e">&nbsp;<label for="mysql_e" class="text-primary">Expert</label>
                        </div>
                    </div>

                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="oracle" id="oracle_lan" class="form-check-input"
                                value="oracle">&nbsp;<label for="oracle_lan" class="text-primary">oracle</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="oracle" id="oracle_b" class="form-check-input"
                                value="b">&nbsp;<label for="oracle_b" class="text-primary">Beginer</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="oracle" id="oracle_m" class="form-check-input"
                                value="m">&nbsp;<label for="oracle_m" class="text-primary">Miderator</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="oracle" id="oracle_e" class="form-check-input"
                                value="e">&nbsp;<label for="oracle_e" class="text-primary">Expert</label>
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-3">
                            <input type="checkbox" name="laravel" id="laravel_lan" class="form-check-input"
                                value="laravel">&nbsp;<label for="laravel_lan" class="text-primary">laravel</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="laravel" id="laravel_b" class="form-check-input"
                                value="b">&nbsp;<label for="laravel_b" class="text-primary">Beginer</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="laravel" id="laravel_m" class="form-check-input"
                                value="m">&nbsp;<label for="laravel_m" class="text-primary">Miderator</label>
                        </div>
                        <div class="col-md-3">
                            <input type="radio" name="laravel" id="laravel_e" class="form-check-input"
                                value="e">&nbsp;<label for="laravel_e" class="text-primary">Expert</label>
                        </div>
                    </div>
                </div>
                <div class="refrence border border-primary" style="display: none;">
                    <p class="btn btn-primary" id="ref" onclick="add('ref',5)">Add Refrences</p>
                    <div class="p-2 row">
                        <div class="col-md-4">
                            <label class="text-primary">Name</label>
                            <input type="text" id="name" name="name" class="form-control" tabindex=""
                                placeholder="Enter name">
                        </div>
                        <div class="col-md-4">
                            <label class="text-primary">Contact</label>
                            <input type="text" id="contact" name="contact" class="form-control"
                                tabindex="" placeholder="Enter Contact">
                        </div>
                        <div class="col-md-4">
                            <label class="text-primary">Realtion</label>
                            <input type="text" id="relation" name="relation" class="form-control" tabindex=""
                                placeholder="Enter Relation">
                        </div>
                    </div>
                </div>        
                <div class="preferences border border-primary" style="display: none;">
                    <div class="p-2 row">
                        <div class="col-md-4">
                            <label>Prefered Location</label>
                            <select id="prefered_location" name="prefered_location" multiple class="form-control">
                                <option value="bhavnagar">Bhavnagar</option>
                                <option value="nadiad">Nadiad</option>
                                <option value="Anand">Anand</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="text-primary">Notice Period</label>
                            <input type="text" class="form-control" id="notice_period"
                            name="notice_period" placeholder="Enter notice period"><br>

                            <label class="text-primary">Expected CTC</label>
                            <input type="text" class="form-control" id="expected_ctc"
                            name="expected_ctc" placeholder="Enter Expected_CTC"><br>
                            
                            <label class="text-primary">Current CTC</label>
                            <input type="text" class="form-control" id="current_ctc"
                            name="current_ctc" placeholder="Enter Current_CTC">
                        </div>
                        <div class="col-md-4">
                            <label>Department</label>
                            <select id="department" name="department" class="form-control">
                                <option value="devlopment">Devlopment</option>
                                <option value="design">Design</option>
                                <option value="marketing">Marketing</option>
                            </select>
                        </div>
                    </div>
                    <div class="p-2 row">
                        <div class="col-md-6">
                            <input type="button" value="save" onclick="passdata()" class="btn btn-primary w-100">
                        </div>
                        <div class="col-md-6">
                            <input type="reset" value="clear" class="btn btn-danger w-100">
                        </div>
                    </div>

                </div> 
                
            </section>
        </form>
        <section>
            <div class="p-2 row">
                <div class="col-12 text-center">
                    <div class="btn-group">
                        <p class="btn btn-outline-primary disabled" id="pre"onclick="return next(-1)">Previous</p>
                        <p class="btn btn-outline-primary" onclick="next(1)" id="next">Next</p>
                    </div>
                </div>
            </div>
        </section>

    </div>


    
    <script>

            
        
        var page=0;
        const next=(n)=>{
            // console.log(window.location)
            document.getElementById('print-err').style.display='none';

            // return false;
            var header_sec=document.getElementById('header_sec').children[0].children;
            var form_sec=document.getElementById('form_sec').children;
            var lastpage=(form_sec.length-1);

                if(form_sec[page].className=='baisicdetails border border-primary')
                {
                    if(isvalid_baisicdetails(form_sec[page])==false)
                    {
                        return false;
                    }
                }    
                
                if(form_sec[page].className=="education-details border border-primary")
                {
                    if(isvalid_education(form_sec[page])==false)
                    {
                        return false;
                    }
                }

                if(form_sec[page].className=="refrence border border-primary")
                {
                    if(isvalid_ref(form_sec[page])==false)
                    {
                        return false;
                    }
                }
                //language
                if(form_sec[page].className=="workexp border border-primary")
                {
                    console.log(form_sec[page])
                    if(isvalid_work(form_sec[page])==false)
                    {
                        return false;
                    }
                }
    
                //technologies

                if(form_sec[page].className=="language border border-primary")
                {
                    if(isvalid_language(form_sec[page])==false)
                    {
                        return false;
                    }
                }

                if(form_sec[page].className=="technolgy container border border-primary")
                {
                    if(isvalid_tech(form_sec[page])==false)
                    {
                        return false;
                    }
                }

                if(form_sec[page].className=="preferences border border-primary")
                {
                    if(isvalid_last(form_sec[page])==false)
                    {
                        return false;
                    }
                }


                header_sec[page].className="col-md p-3  text-center text-primary bg-white";
                form_sec[page].style.display='none';
                page=page+n;
                form_sec[page].style.display='block';
                header_sec[page].className="bg-primary col-md p-3 text-white text-center";
                document.getElementById('pre').className='btn btn-outline-primary';
                document.getElementById('next').className='btn btn-outline-primary';


                if(page<=0)
                {
                    document.getElementById('pre').className='btn btn-outline-primary disabled';
                    document.getElementById('next').className='btn btn-outline-primary'
                }
                if(page>lastpage-1)
                {
                    document.getElementById('next').className='btn btn-outline-primary disabled';
                    document.getElementById('pre').className='btn btn-outline-primary';    
                }
                return true
            }
            var url="";
            const passdata=async()=>{
                var id=window.location.href.split('/').pop();
                console.log(id)
                if(isNaN(id))
                {   
                    url='http://localhost:8000/ajax-form/form'
                }
                else
                {
                    url=`http://localhost:8000/ajax-form/update/${id}`
                }
                const form=document.getElementById('form-1')
                var data=new URLSearchParams(new FormData(form))

                var res=await fetch(url,{
                    method:'POST',
                    body:data,
                    headers:{
                        'Content-Type':'application/x-www-form-urlencoded'
                    },
                });
                res=await res.json();
                console.log(res) 
                document.getElementById('print-err').style.display='block';
                document.getElementById('print-err').innerHTML=res.error;
            }   

            if(`<%=id%>`!=false)
            { 
            var url=`/ajax-form/data/<%=id%>`;
                fetch(url)
            .then(response=> response.json())
            .then((data)=>{
                update(data);
            })
       }
</script>

</body>

</html>